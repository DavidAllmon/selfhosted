# Docker Cheat Sheet

## Docker Basics

- **Images**: Read-only templates used to create containers.
- **Containers**: Runnable instance of an image. Isolated environments.
- **Dockerfile**: Text file containing instructions to build Docker images.
- **Docker Engine**: Client-server application with these major components:
  - Docker daemon (dockerd): Server responsible for managing images, containers, networks, and volumes.
  - Docker CLI (docker): Command-line tool used to interact with Docker daemon.
- **Docker Hub**: Centralized repository for Docker images.

## Docker Commands

### Management Commands

- **Build an image**: `docker build -t <image_name> .`
- **List images**: `docker images`
- **Run a container**: `docker run <image_name>`
- **List containers**: `docker ps` (active) or `docker ps -a` (all)
- **Stop container**: `docker stop <container_id>`
- **Remove container**: `docker rm <container_id>`
- **Remove image**: `docker rmi <image_name>`
- **View logs**: `docker logs <container_id>`
- **Inspect container**: `docker inspect <container_id>`
- **Inspect image**: `docker image inspect <image_name>`
- **Pull image from Docker Hub**: `docker pull <image_name>`
- **Push image to Docker Hub**: `docker push <image_name>`
- **Tag image**: `docker tag <image_id> <new_image_name>`
- **Save image to file**: `docker save -o <output_file_name> <image_name>`
- **Load image from file**: `docker load -i <input_file_name>`
- **Prune unused resources**: `docker system prune`

### Dockerfile Instructions

- **FROM**: Base image for subsequent instructions.
- **RUN**: Execute commands in a new layer on top of the current image.
- **COPY / ADD**: Copy files or directories from the host to the container.
- **WORKDIR**: Set the working directory for subsequent instructions.
- **EXPOSE**: Inform Docker that the container listens on specific network ports at runtime.
- **CMD**: Specify the default command to run when the container starts.
- **ENTRYPOINT**: Configure a container that will run as an executable.

## Docker Compose

- **Definition file**: `docker-compose.yml`
- **Build services**: `docker-compose build`
- **Run services**: `docker-compose up`
- **Run services in background**: `docker-compose up -d`
- **Stop services**: `docker-compose down`
- **View logs**: `docker-compose logs`

## Docker Networking

- **Bridge Network**: Default network. Containers connected to the same bridge can communicate.
- **Host Network**: Containers share the host's network stack.
- **Overlay Network**: Connects multiple Docker daemons across multiple hosts.
- **Macvlan Network**: Assigns a MAC address to each containerâ€™s virtual network interface.

## Docker Volumes

- **Bind Mounts**: Link container path to a host file or directory.
- **Volumes**: Persist data generated by and used by Docker containers.
- **Volume Drivers**: Plugins allow volumes to be stored on remote hosts or cloud providers.

## Docker Security

- **User Namespaces**: Map container user to host user, enhancing security.
- **AppArmor / SELinux**: Enforce security policies.
- **Docker Content Trust**: Enable digital signing and verification of images.
- **Secrets Management**: Safely store sensitive data like passwords and keys.

## Docker Swarm

- **Swarm Mode**: Built-in orchestration tool in Docker.
- **Manager Nodes**: Control the swarm and deploy services.
- **Worker Nodes**: Execute tasks dispatched by manager nodes.
- **Services**: Define the tasks to execute across the swarm.
- **Stacks**: Group of interrelated services that make up an application.
- **Tokens**: Used for communication between nodes.

## Docker Tips

- **Use Multi-Stage Builds**: Reduce final image size by separating build and runtime environments.
- **Leverage Caching**: Reuse layers during builds to speed up subsequent builds.
- **Use .dockerignore**: Exclude unnecessary files and directories from being copied into the image.
- **Monitor Resource Usage**: Keep an eye on CPU, memory, and disk usage of Docker containers.
- **Regularly Update Images**: Keep your images and containers up-to-date with the latest security patches.
- **Backup Data Volumes**: Ensure critical data stored in Docker volumes is backed up regularly.

